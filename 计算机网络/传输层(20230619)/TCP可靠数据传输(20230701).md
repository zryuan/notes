# TCP-可靠数据传输

### 连续ARQ协议 + 滑动窗口协议

![image-20230619224311793](C:\Users\renyuan.zhang\Desktop\notes\计算机网络\传输层(20230619)\images\image-20230619224311793.png)



### 选择性确认 - SACK

SACK（Selective Acknowledgement）选择性确认

可以告诉发送方未按序到达的哪些数据是已经确认收到的，那些是丢失的。

![image-20230620155658261](C:\Users\renyuan.zhang\Desktop\notes\计算机网络\传输层(20230619)\images\image-20230620155658261.png)

SACK信息会放在TCP首部的可变部分。

Kind：占一个字节，值为5表示这是SACK选项

Length：占一个字节，表示SACK选项总共需要占用多少字节

Left Edge：占四个字节，左边界

Right Edge：占四个字节，右边界

![image-20230620160126945](C:\Users\renyuan.zhang\Desktop\notes\计算机网络\传输层(20230619)\images\image-20230620160126945.png)

首先确认号201，表示前面200个字节已经确认收到

SACK选项信息：

第一对左边界值（L1）为301，右边界（R1）值为401，表示301到 400（右边减1）这一块是确认收到的，不需要在重新传。

以此类推。

一对边界信息需要占用八个字节，还有两个固定字节。但是可变部分最大四十个字节

所以(40 - 2) / 8 = 4，最多能存取4对边界信息。